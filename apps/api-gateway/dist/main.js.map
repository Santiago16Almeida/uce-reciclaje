{"version":3,"file":"main.js","mappings":";;;;;;;AAAA,yC;;;;;;ACAa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB,gBAAgB,mBAAO,CAAC,CAAO;AAC/B,iBAAiB,mBAAO,CAAC,CAAgB;AACzC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,eAAe,mBAAO,CAAC,CAAM;AAC7B,yBAAyB,mBAAO,CAAC,CAAkB;AACnD,sBAAsB,mBAAO,CAAC,EAAe;AAC7C;AACA;AACA,iBAAiB;AACjB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,mCAAmC;AAClE,iBAAiB;AACjB;AACA;AACA;AACA,+BAA+B,mCAAmC;AAClE,iBAAiB;AACjB;AACA;AACA;AACA;AACA,+BAA+B,mCAAmC;AAClE,iBAAiB;AACjB;AACA;AACA;AACA,+BAA+B,mCAAmC;AAClE,iBAAiB;AACjB;AACA;AACA;AACA,+BAA+B,mCAAmC;AAClE,iBAAiB;AACjB;AACA;AACA;AACA;AACA,+BAA+B,+BAA+B;AAC9D,iBAAiB;AACjB;AACA;AACA;AACA,+BAA+B,+BAA+B;AAC9D,iBAAiB;AACjB;AACA;AACA;AACA,+BAA+B,+BAA+B;AAC9D,iBAAiB;AACjB;AACA;AACA;AACA;AACA,+BAA+B,mCAAmC;AAClE,iBAAiB;AACjB;AACA;AACA;AACA,+BAA+B,mCAAmC;AAClE,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA,KAAK;AACL;;;;;;;AC5FA,kC;;;;;;ACAA,2C;;;;;;ACAA,kD;;;;;;ACAA,iC;;;;;;ACAa;AACb;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB;AACrB,gBAAgB,mBAAO,CAAC,CAAO;AAC/B,iBAAiB,mBAAO,CAAC,CAAgB;AACzC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,eAAe,mBAAO,CAAC,CAAM;AAC7B,kBAAkB,mBAAO,CAAC,CAAS;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,oBAAoB;AACxF;AACA;AACA;AACA,aAAa;AACb;AACA,2FAA2F,sBAAsB;AACjH;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,8EAA8E,cAAc;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,sBAAsB,IAAI;AAC3F;AACA;AACA;AACA,iEAAiE,yBAAyB,IAAI,OAAO;AACrG;AACA;AACA;AACA;AACA;AACA,sFAAsF,mBAAmB,IAAI,+BAA+B;AAC5I;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qFAAqF,sBAAsB,IAAI;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,kCAAkC;AAChE;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,mEAAmE,oBAAoB,IAAI;AAC3F;AACA;AACA;AACA,6EAA6E,mBAAmB,IAAI;AACpG;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,yCAAyC,0BAA0B;AACnE;AACA;AACA;AACA,qFAAqF,sBAAsB,IAAI;AAC/G;AACA,yFAAyF,mBAAmB;AAC5G;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACxNA,iC;;;;;;ACAA,oC;;;;;;ACAa;AACb;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kBAAkB;AAClB,gBAAgB,mBAAO,CAAC,CAAO;AAC/B,iBAAiB,mBAAO,CAAC,CAAgB;AACzC,wBAAwB,mBAAO,CAAC,CAAuB;AACvD,oBAAoB,mBAAO,CAAC,EAAgB;AAC5C,eAAe,mBAAO,CAAC,CAAM;AAC7B;AACA;AACA;AACA;AACA;AACA,uEAAuE,GAAG;AAC1E,0DAA0D,IAAI;AAC9D;AACA;AACA,0EAA0E,MAAM;AAChF;AACA,6DAA6D,eAAe;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,kBAAkB;AAClB,kBAAkB;AAClB;AACA;AACA;AACA;;;;;;;ACpCA,2C;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;;;ACtBa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,eAAe,mBAAO,CAAC,CAAc;AACrC,qBAAqB,mBAAO,CAAC,CAAkB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA","sources":["external commonjs \"@nestjs/core\"","C:\\Users\\IntelCore i5\\uce-reciclaje\\apps\\api-gateway\\src\\app\\app.module.ts","external commonjs \"tslib\"","external commonjs \"@nestjs/common\"","external commonjs \"@nestjs/microservices\"","external node-commonjs \"path\"","C:\\Users\\IntelCore i5\\uce-reciclaje\\apps\\api-gateway\\src\\app\\app.controller.ts","external commonjs \"rxjs\"","external commonjs \"express\"","C:\\Users\\IntelCore i5\\uce-reciclaje\\apps\\api-gateway\\src\\app\\app.service.ts","external commonjs \"rxjs/operators\"","webpack/bootstrap","C:\\Users\\IntelCore i5\\uce-reciclaje\\apps\\api-gateway\\src\\main.ts"],"sourcesContent":["module.exports = require(\"@nestjs/core\");","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AppModule = void 0;\nconst tslib_1 = require(\"tslib\");\nconst common_1 = require(\"@nestjs/common\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst path_1 = require(\"path\");\nconst app_controller_1 = require(\"./app.controller\");\nconst app_service_1 = require(\"./app.service\");\nlet AppModule = class AppModule {\n};\nexports.AppModule = AppModule;\nexports.AppModule = AppModule = tslib_1.__decorate([\n    (0, common_1.Module)({\n        imports: [\n            microservices_1.ClientsModule.register([\n                // --- CUENTA 1: USUARIOS Y AUTENTICACIÃ“N (3.234.125.204) ---\n                {\n                    name: 'USER_SERVICE',\n                    transport: microservices_1.Transport.TCP,\n                    options: { host: '3.234.125.204', port: 3001 },\n                },\n                {\n                    name: 'AUTH_SERVICE', // El que usas con $env:NODE_OPTIONS\n                    transport: microservices_1.Transport.TCP,\n                    options: { host: '3.234.125.204', port: 3002 },\n                },\n                // --- CUENTA 2: IOT Y AUDITORÃA (52.200.64.213) ---\n                {\n                    name: 'IOT_SERVICE',\n                    transport: microservices_1.Transport.TCP,\n                    options: { host: '52.200.64.213', port: 3003 },\n                },\n                {\n                    name: 'DEPOSIT_SERVICE',\n                    transport: microservices_1.Transport.TCP,\n                    options: { host: '52.200.64.213', port: 3004 },\n                },\n                {\n                    name: 'AUDIT_SERVICE',\n                    transport: microservices_1.Transport.TCP,\n                    options: { host: '52.200.64.213', port: 3008 },\n                },\n                // --- CUENTA 3 (ESTA INSTANCIA): RECOMPENSAS Y SALUD (Local) ---\n                {\n                    name: 'REWARD_SERVICE',\n                    transport: microservices_1.Transport.TCP,\n                    options: { host: '127.0.0.1', port: 3006 },\n                },\n                {\n                    name: 'HEALTH_SERVICE',\n                    transport: microservices_1.Transport.TCP,\n                    options: { host: '127.0.0.1', port: 3010 },\n                },\n                {\n                    name: 'RECYCLING_SERVICE',\n                    transport: microservices_1.Transport.TCP,\n                    options: { host: '127.0.0.1', port: 3011 },\n                },\n                // --- CUENTA 4: REPORTES Y NOTIFICACIONES (100.52.80.163) ---\n                {\n                    name: 'REPORT_SERVICE',\n                    transport: microservices_1.Transport.TCP,\n                    options: { host: '100.52.80.163', port: 3009 },\n                },\n                {\n                    name: 'NOTIFICATION_SERVICE',\n                    transport: microservices_1.Transport.TCP,\n                    options: { host: '100.52.80.163', port: 3007 },\n                },\n                // --- RESPALDO GRPC (Cuenta 1) ---\n                {\n                    name: 'AUTH_PACKAGE',\n                    transport: microservices_1.Transport.GRPC,\n                    options: {\n                        package: 'auth',\n                        protoPath: (0, path_1.join)(__dirname, 'assets', 'auth.proto'),\n                        url: '3.234.125.204:50051',\n                        loader: {\n                            keepCase: true,\n                            longs: String,\n                            enums: String,\n                            defaults: true,\n                            oneofs: true,\n                        },\n                    },\n                },\n            ]),\n        ],\n        controllers: [app_controller_1.AppController],\n        providers: [app_service_1.AppService],\n    })\n], AppModule);\n","module.exports = require(\"tslib\");","module.exports = require(\"@nestjs/common\");","module.exports = require(\"@nestjs/microservices\");","module.exports = require(\"path\");","\"use strict\";\nvar _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AppController = void 0;\nconst tslib_1 = require(\"tslib\");\nconst common_1 = require(\"@nestjs/common\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst rxjs_1 = require(\"rxjs\");\nconst express_1 = require(\"express\");\nlet AppController = class AppController {\n    //Comunicacion entre microservicios\n    constructor(authClient, userClient, authTcpClient, iotClient, depositClient, rewardClient, auditClient, notificationClient, reportClient, healthClient, recyclingClient) {\n        this.authClient = authClient;\n        this.userClient = userClient;\n        this.authTcpClient = authTcpClient;\n        this.iotClient = iotClient;\n        this.depositClient = depositClient;\n        this.rewardClient = rewardClient;\n        this.auditClient = auditClient;\n        this.notificationClient = notificationClient;\n        this.reportClient = reportClient;\n        this.healthClient = healthClient;\n        this.recyclingClient = recyclingClient;\n    }\n    onModuleInit() {\n        //this.getGrpcService();\n        console.log('ðŸš€ Gateway: Bypass gRPC activo para pruebas');\n    }\n    getGrpcService() {\n        if (!this.authGrpcService) {\n            try {\n                this.authGrpcService = this.authClient.getService('AuthService');\n            }\n            catch (error) {\n                console.error('âŒ Gateway: Error gRPC:', error.message);\n            }\n        }\n        return this.authGrpcService;\n    }\n    // --- RUTAS DE AUTENTICACIÃ“N ---\n    async register(userData) {\n        try {\n            //Crear perfil en User-Service\n            await (0, rxjs_1.firstValueFrom)(this.userClient.send({ cmd: 'create_user' }, {\n                email: userData.email,\n                nombre: userData.nombre,\n                role: userData.role\n            }));\n            //Crear credenciales en Auth-Service\n            const authAccount = await (0, rxjs_1.firstValueFrom)(this.authTcpClient.send({ cmd: 'register_auth' }, {\n                email: userData.email,\n                password: userData.password,\n                role: userData.role\n            }));\n            return authAccount;\n        }\n        catch (error) {\n            return { status: 'Error', message: 'Servicio Auth/User no disponible' };\n        }\n    }\n    async login(credentials) {\n        try {\n            return await (0, rxjs_1.firstValueFrom)(this.authTcpClient.send({ cmd: 'login' }, credentials));\n        }\n        catch (error) {\n            throw new common_1.UnauthorizedException('Credenciales invÃ¡lidas o microservicio Auth caÃ­do');\n        }\n    }\n    // --- RUTAS DE DATOS ---\n    async getAllUsers() {\n        return (0, rxjs_1.firstValueFrom)(this.userClient.send({ cmd: 'get_all_users' }, {}));\n    }\n    async getProfile(email) {\n        console.log('[Gateway] Pidiendo perfil para:', email);\n        return (0, rxjs_1.firstValueFrom)(this.userClient.send({ cmd: 'get_user_profile' }, { email }));\n    }\n    // apps/api-gateway/src/app/app.controller.ts\n    // apps/api-gateway/src/app/app.controller.ts\n    async sumarPuntosBypass(puntos, email) {\n        try {\n            const respuesta = await (0, rxjs_1.firstValueFrom)(this.userClient.send({ cmd: 'add_points' }, { email, puntos: Number(puntos) }));\n            return respuesta;\n        }\n        catch (e) {\n            return { status: 'Error' };\n        }\n    }\n    async getMonthlyReport() {\n        try {\n            const usuarios = await (0, rxjs_1.firstValueFrom)(this.userClient.send({ cmd: 'get_all_users' }, {}));\n            const totalPuntos = usuarios.reduce((sum, u) => sum + (Number(u.puntos) || 0), 0);\n            const totalBotellas = Math.floor(totalPuntos / 10);\n            const sorted = [...usuarios].sort((a, b) => (Number(b.puntos) || 0) - (Number(a.puntos) || 0));\n            const top = sorted[0];\n            return {\n                totalBotellas,\n                ahorroCO2: `${(totalBotellas * 0.05).toFixed(2)}kg`,\n                estudianteTop: top ? top.nombre : '---'\n            };\n        }\n        catch (error) {\n            return { totalBotellas: 0, ahorroCO2: '0.00kg', estudianteTop: '---' };\n        }\n    }\n    async getRewards() {\n        return (0, rxjs_1.firstValueFrom)(this.rewardClient.send({ cmd: 'get_catalog' }, {}));\n    }\n    async getHealth() {\n        try {\n            return await (0, rxjs_1.firstValueFrom)(this.healthClient.send({ cmd: 'get_status' }, {}));\n        }\n        catch (e) {\n            return { status: 'Gateway OK', services: 'Sincronizando...' };\n        }\n    }\n    async registrarDeposito(data) {\n        console.log('[Gateway] Redirigiendo depÃ³sito para:', data.email);\n        return this.depositClient.send({ cmd: 'depositar_botella' }, data);\n    }\n    async exportarReporte(res) {\n        try {\n            const usuarios = await (0, rxjs_1.firstValueFrom)(this.userClient.send({ cmd: 'get_all_users' }, {}));\n            console.log('[Gateway] Enviando usuarios al Report-Service:', usuarios.length);\n            const csvContent = await (0, rxjs_1.firstValueFrom)(this.reportClient.send({ cmd: 'export_csv' }, usuarios));\n            res.setHeader('Content-Type', 'text/csv');\n            res.setHeader('Content-Disposition', 'attachment; filename=reporte_uce.csv');\n            return res.status(200).send(csvContent);\n        }\n        catch (error) {\n            console.error('[Gateway Error Export]', error.message);\n            return res.status(500).send('Error al generar el archivo');\n        }\n    }\n};\nexports.AppController = AppController;\ntslib_1.__decorate([\n    (0, common_1.Post)('auth/register'),\n    tslib_1.__param(0, (0, common_1.Body)()),\n    tslib_1.__metadata(\"design:type\", Function),\n    tslib_1.__metadata(\"design:paramtypes\", [Object]),\n    tslib_1.__metadata(\"design:returntype\", Promise)\n], AppController.prototype, \"register\", null);\ntslib_1.__decorate([\n    (0, common_1.Post)('auth/login'),\n    tslib_1.__param(0, (0, common_1.Body)()),\n    tslib_1.__metadata(\"design:type\", Function),\n    tslib_1.__metadata(\"design:paramtypes\", [Object]),\n    tslib_1.__metadata(\"design:returntype\", Promise)\n], AppController.prototype, \"login\", null);\ntslib_1.__decorate([\n    (0, common_1.Get)('usuarios/todos'),\n    tslib_1.__metadata(\"design:type\", Function),\n    tslib_1.__metadata(\"design:paramtypes\", []),\n    tslib_1.__metadata(\"design:returntype\", Promise)\n], AppController.prototype, \"getAllUsers\", null);\ntslib_1.__decorate([\n    (0, common_1.Get)('perfil'),\n    tslib_1.__param(0, (0, common_1.Query)('email')),\n    tslib_1.__metadata(\"design:type\", Function),\n    tslib_1.__metadata(\"design:paramtypes\", [String]),\n    tslib_1.__metadata(\"design:returntype\", Promise)\n], AppController.prototype, \"getProfile\", null);\ntslib_1.__decorate([\n    (0, common_1.Get)('sumar'),\n    tslib_1.__param(0, (0, common_1.Query)('puntos')),\n    tslib_1.__param(1, (0, common_1.Query)('email')),\n    tslib_1.__metadata(\"design:type\", Function),\n    tslib_1.__metadata(\"design:paramtypes\", [String, String]),\n    tslib_1.__metadata(\"design:returntype\", Promise)\n], AppController.prototype, \"sumarPuntosBypass\", null);\ntslib_1.__decorate([\n    (0, common_1.Get)('reportes/mensual'),\n    tslib_1.__metadata(\"design:type\", Function),\n    tslib_1.__metadata(\"design:paramtypes\", []),\n    tslib_1.__metadata(\"design:returntype\", Promise)\n], AppController.prototype, \"getMonthlyReport\", null);\ntslib_1.__decorate([\n    (0, common_1.Get)('rewards'),\n    tslib_1.__metadata(\"design:type\", Function),\n    tslib_1.__metadata(\"design:paramtypes\", []),\n    tslib_1.__metadata(\"design:returntype\", Promise)\n], AppController.prototype, \"getRewards\", null);\ntslib_1.__decorate([\n    (0, common_1.Get)('health-check'),\n    tslib_1.__metadata(\"design:type\", Function),\n    tslib_1.__metadata(\"design:paramtypes\", []),\n    tslib_1.__metadata(\"design:returntype\", Promise)\n], AppController.prototype, \"getHealth\", null);\ntslib_1.__decorate([\n    (0, common_1.Post)('depositar'),\n    tslib_1.__param(0, (0, common_1.Body)()),\n    tslib_1.__metadata(\"design:type\", Function),\n    tslib_1.__metadata(\"design:paramtypes\", [Object]),\n    tslib_1.__metadata(\"design:returntype\", Promise)\n], AppController.prototype, \"registrarDeposito\", null);\ntslib_1.__decorate([\n    (0, common_1.Get)('reportes/exportar'),\n    tslib_1.__param(0, (0, common_1.Res)()),\n    tslib_1.__metadata(\"design:type\", Function),\n    tslib_1.__metadata(\"design:paramtypes\", [typeof (_l = typeof express_1.Response !== \"undefined\" && express_1.Response) === \"function\" ? _l : Object]),\n    tslib_1.__metadata(\"design:returntype\", Promise)\n], AppController.prototype, \"exportarReporte\", null);\nexports.AppController = AppController = tslib_1.__decorate([\n    (0, common_1.Controller)(),\n    tslib_1.__param(0, (0, common_1.Inject)('AUTH_PACKAGE')),\n    tslib_1.__param(1, (0, common_1.Inject)('USER_SERVICE')),\n    tslib_1.__param(2, (0, common_1.Inject)('AUTH_SERVICE')),\n    tslib_1.__param(3, (0, common_1.Inject)('IOT_SERVICE')),\n    tslib_1.__param(4, (0, common_1.Inject)('DEPOSIT_SERVICE')),\n    tslib_1.__param(5, (0, common_1.Inject)('REWARD_SERVICE')),\n    tslib_1.__param(6, (0, common_1.Inject)('AUDIT_SERVICE')),\n    tslib_1.__param(7, (0, common_1.Inject)('NOTIFICATION_SERVICE')),\n    tslib_1.__param(8, (0, common_1.Inject)('REPORT_SERVICE')),\n    tslib_1.__param(9, (0, common_1.Inject)('HEALTH_SERVICE')),\n    tslib_1.__param(10, (0, common_1.Inject)('RECYCLING_SERVICE')),\n    tslib_1.__metadata(\"design:paramtypes\", [Object, typeof (_a = typeof microservices_1.ClientProxy !== \"undefined\" && microservices_1.ClientProxy) === \"function\" ? _a : Object, typeof (_b = typeof microservices_1.ClientProxy !== \"undefined\" && microservices_1.ClientProxy) === \"function\" ? _b : Object, typeof (_c = typeof microservices_1.ClientProxy !== \"undefined\" && microservices_1.ClientProxy) === \"function\" ? _c : Object, typeof (_d = typeof microservices_1.ClientProxy !== \"undefined\" && microservices_1.ClientProxy) === \"function\" ? _d : Object, typeof (_e = typeof microservices_1.ClientProxy !== \"undefined\" && microservices_1.ClientProxy) === \"function\" ? _e : Object, typeof (_f = typeof microservices_1.ClientProxy !== \"undefined\" && microservices_1.ClientProxy) === \"function\" ? _f : Object, typeof (_g = typeof microservices_1.ClientProxy !== \"undefined\" && microservices_1.ClientProxy) === \"function\" ? _g : Object, typeof (_h = typeof microservices_1.ClientProxy !== \"undefined\" && microservices_1.ClientProxy) === \"function\" ? _h : Object, typeof (_j = typeof microservices_1.ClientProxy !== \"undefined\" && microservices_1.ClientProxy) === \"function\" ? _j : Object, typeof (_k = typeof microservices_1.ClientProxy !== \"undefined\" && microservices_1.ClientProxy) === \"function\" ? _k : Object])\n], AppController);\n","module.exports = require(\"rxjs\");","module.exports = require(\"express\");","\"use strict\";\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AppService = void 0;\nconst tslib_1 = require(\"tslib\");\nconst common_1 = require(\"@nestjs/common\");\nconst microservices_1 = require(\"@nestjs/microservices\");\nconst operators_1 = require(\"rxjs/operators\");\nconst rxjs_1 = require(\"rxjs\");\nlet AppService = class AppService {\n    constructor(userClient) {\n        this.userClient = userClient;\n    }\n    obtenerPerfilUsuario(id) {\n        console.log(`[Gateway Service] TCP -> get_user_profile para: ${id}`);\n        return this.userClient.send('get_user_profile', { id }).pipe((0, operators_1.timeout)(5000), (0, operators_1.catchError)((err) => this.handleError(err)));\n    }\n    sumarPuntosUsuario(email, puntos) {\n        console.log(`[Gateway Service] TCP -> sumar_puntos_evento para: ${email}`);\n        // Enviamos los datos al microservicio\n        return this.userClient.send('sumar_puntos_evento', { email, puntos }).pipe((0, operators_1.timeout)(5000), (0, operators_1.catchError)((err) => this.handleError(err)));\n    }\n    handleError(err) {\n        console.error('[Gateway Error]', err.message);\n        return (0, rxjs_1.of)({\n            status: 'error',\n            message: 'El User-Service no respondiÃ³.',\n            details: err.message\n        });\n    }\n};\nexports.AppService = AppService;\nexports.AppService = AppService = tslib_1.__decorate([\n    (0, common_1.Injectable)(),\n    tslib_1.__param(0, (0, common_1.Inject)('USER_SERVICE')),\n    tslib_1.__metadata(\"design:paramtypes\", [typeof (_a = typeof microservices_1.ClientProxy !== \"undefined\" && microservices_1.ClientProxy) === \"function\" ? _a : Object])\n], AppService);\n","module.exports = require(\"rxjs/operators\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst core_1 = require(\"@nestjs/core\");\nconst app_module_1 = require(\"./app/app.module\");\nasync function bootstrap() {\n    const app = await core_1.NestFactory.create(app_module_1.AppModule);\n    app.enableCors({\n        // Permitimos que el Dashboard desde la IP de la Cuenta 3 acceda\n        origin: ['http://localhost:5000', 'http://100.50.26.228:5000'],\n        methods: 'GET,POST,PUT,DELETE',\n        credentials: true,\n    });\n    app.setGlobalPrefix('api');\n    await app.listen(3000);\n    console.log('ðŸš€ Gateway operando en http://100.50.26.228:3000/api');\n}\n"],"names":[],"ignoreList":[],"sourceRoot":""}